{"ast":null,"code":"var _jsxFileName = \"/mnt/dados/nodejs/GoStack/semana_3/gobarber/web/src/pages/Dashboard/index.tsx\";\nimport React, { useCallback, useEffect, useMemo, useState } from \"react\";\nimport DayPicker from \"react-day-picker\";\nimport \"react-day-picker/lib/style.css\";\nimport { isToday, format } from \"date-fns\";\nimport ptBR from \"date-fns/locale/pt-BR\";\nimport { Calendar, Container, Content, Header, HeaderContent, Profile, Schedule, NextAppointment, Section, Appointment } from \"./styles\";\nimport logo from \"../../assets/logo.svg\";\nimport { FiClock, FiPower } from \"react-icons/fi\";\nimport useAuthContext from \"../../contexts/AuthContext\";\nimport api from \"../../services/api\";\n\nconst Dashboard = () => {\n  const {\n    signOut,\n    user\n  } = useAuthContext();\n  const [appointments, setAppointments] = useState([]);\n  const [selectedDate, setSelectedDate] = useState(new Date());\n  const [currentMonth, setCurrentMonth] = useState(new Date());\n  const [monthAvailabity, setMonthAvailabity] = useState([]);\n  const selectedDateAsText = useMemo(() => {\n    return format(selectedDate, \"'Dia' dd 'de' MMMM\", {\n      locale: ptBR\n    });\n  }, [selectedDate]);\n  const selectedWeekDay = useMemo(() => {\n    return format(selectedDate, \"cccc\", {\n      locale: ptBR\n    });\n  }, [selectedDate]);\n  const handleDateChange = useCallback((day, modifiers) => {\n    if (modifiers.available) {\n      setSelectedDate(day);\n    }\n  }, []);\n  const handleMonthChange = useCallback(month => {\n    setCurrentMonth(month);\n  }, []);\n  const disableDays = useMemo(() => {\n    const dates = monthAvailabity.filter(({\n      available\n    }) => !available).map(monthDay => {\n      const year = currentMonth.getFullYear();\n      const month = currentMonth.getMonth();\n      return new Date(year, month, monthDay.day);\n    });\n    return dates;\n  }, [currentMonth, monthAvailabity]);\n  useEffect(() => {\n    api.get(`/providers/${user.id}/month-availability`, {\n      params: {\n        year: currentMonth.getFullYear(),\n        month: currentMonth.getMonth() + 1\n      }\n    }).then(({\n      data\n    }) => {\n      setMonthAvailabity(data);\n    });\n  }, [currentMonth, user.id]);\n  useEffect(() => {\n    api.get(\"appointments/me\", {\n      params: {\n        year: selectedDate.getFullYear(),\n        month: selectedDate.getMonth() + 1,\n        day: selectedDate.getDate()\n      }\n    }).then(({\n      data\n    }) => {\n      setAppointments(data);\n    });\n  }, [selectedDate]);\n  return /*#__PURE__*/React.createElement(Container, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Header, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(HeaderContent, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: logo,\n    alt: \"Gobarber logo\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(Profile, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: user.avatar,\n    alt: user.name,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 15\n    }\n  }, \"Bem-vindo\"), /*#__PURE__*/React.createElement(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 15\n    }\n  }, user.name))), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    onClick: signOut,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(FiPower, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 13\n    }\n  })))), /*#__PURE__*/React.createElement(Content, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Schedule, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 11\n    }\n  }, \"Hor\\xE1rios agendados\"), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 11\n    }\n  }, isToday(selectedDate) ? /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 38\n    }\n  }, \"Hoje\") : null, /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 13\n    }\n  }, selectedDateAsText), /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 13\n    }\n  }, selectedWeekDay)), /*#__PURE__*/React.createElement(NextAppointment, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 13\n    }\n  }, \"Atendimento a seguir\"), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: user.avatar,\n    alt: user.avatar,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 15\n    }\n  }, user.name), /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(FiClock, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 17\n    }\n  }), \"08:00\"))), /*#__PURE__*/React.createElement(Section, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 13\n    }\n  }, \"Manh\\xE3\"), /*#__PURE__*/React.createElement(Appointment, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(FiClock, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 17\n    }\n  }), \"08:00\"), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: user.avatar,\n    alt: user.avatar,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 17\n    }\n  }, user.name))), /*#__PURE__*/React.createElement(Appointment, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(FiClock, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 17\n    }\n  }), \"11:00\"), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: user.avatar,\n    alt: user.avatar,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 17\n    }\n  }, user.name)))), /*#__PURE__*/React.createElement(Section, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 171,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 13\n    }\n  }, \"Tarde\"), /*#__PURE__*/React.createElement(Appointment, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(FiClock, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 17\n    }\n  }), \"16:00\"), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 180,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: user.avatar,\n    alt: user.avatar,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 181,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 182,\n      columnNumber: 17\n    }\n  }, user.name))))), /*#__PURE__*/React.createElement(Calendar, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 187,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(DayPicker, {\n    weekdaysShort: [\"D\", \"S\", \"T\", \"Q\", \"Q\", \"S\", \"S\"],\n    fromMonth: new Date(),\n    disabledDays: [{\n      daysOfWeek: [0, 6]\n    }, ...disableDays],\n    modifiers: {\n      available: {\n        daysOfWeek: [1, 2, 3, 4, 5]\n      }\n    },\n    selectedDays: selectedDate,\n    onDayClick: handleDateChange,\n    onMonthChange: handleMonthChange,\n    months: [\"Janeiro\", \"Fevereiro\", \"Março\", \"Abril\", \"Maio\", \"Junho\", \"Julho\", \"Agosto\", \"Setembro\", \"Outubro\", \"Novembro\", \"Dezembro\"],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 188,\n      columnNumber: 11\n    }\n  }))));\n};\n\nexport default Dashboard;","map":{"version":3,"sources":["/mnt/dados/nodejs/GoStack/semana_3/gobarber/web/src/pages/Dashboard/index.tsx"],"names":["React","useCallback","useEffect","useMemo","useState","DayPicker","isToday","format","ptBR","Calendar","Container","Content","Header","HeaderContent","Profile","Schedule","NextAppointment","Section","Appointment","FiClock","FiPower","useAuthContext","api","Dashboard","signOut","user","appointments","setAppointments","selectedDate","setSelectedDate","Date","currentMonth","setCurrentMonth","monthAvailabity","setMonthAvailabity","selectedDateAsText","locale","selectedWeekDay","handleDateChange","day","modifiers","available","handleMonthChange","month","disableDays","dates","filter","map","monthDay","year","getFullYear","getMonth","get","id","params","then","data","getDate","logo","avatar","name","daysOfWeek"],"mappings":"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","sourcesContent":["import React, { useCallback, useEffect, useMemo, useState } from \"react\";\nimport DayPicker, { DayModifiers } from \"react-day-picker\";\nimport \"react-day-picker/lib/style.css\";\n\nimport { isToday, format } from \"date-fns\";\nimport ptBR from \"date-fns/locale/pt-BR\";\n\nimport {\n  Calendar,\n  Container,\n  Content,\n  Header,\n  HeaderContent,\n  Profile,\n  Schedule,\n  NextAppointment,\n  Section,\n  Appointment,\n} from \"./styles\";\n\nimport logo from \"../../assets/logo.svg\";\nimport { FiClock, FiPower } from \"react-icons/fi\";\nimport useAuthContext from \"../../contexts/AuthContext\";\nimport api from \"../../services/api\";\n\ninterface MonthAvailabityItem {\n  day: number;\n  available: boolean;\n}\n\nconst Dashboard: React.FC = () => {\n  const { signOut, user } = useAuthContext();\n  const [appointments, setAppointments] = useState([]);\n  const [selectedDate, setSelectedDate] = useState(new Date());\n  const [currentMonth, setCurrentMonth] = useState(new Date());\n  const [monthAvailabity, setMonthAvailabity] = useState<MonthAvailabityItem[]>(\n    []\n  );\n\n  const selectedDateAsText = useMemo(() => {\n    return format(selectedDate, \"'Dia' dd 'de' MMMM\", {\n      locale: ptBR,\n    });\n  }, [selectedDate]);\n\n  const selectedWeekDay = useMemo(() => {\n    return format(selectedDate, \"cccc\", {\n      locale: ptBR,\n    });\n  }, [selectedDate]);\n\n  const handleDateChange = useCallback((day: Date, modifiers: DayModifiers) => {\n    if (modifiers.available) {\n      setSelectedDate(day);\n    }\n  }, []);\n\n  const handleMonthChange = useCallback((month: Date) => {\n    setCurrentMonth(month);\n  }, []);\n\n  const disableDays = useMemo(() => {\n    const dates = monthAvailabity\n      .filter(({ available }) => !available)\n      .map((monthDay) => {\n        const year = currentMonth.getFullYear();\n        const month = currentMonth.getMonth();\n        return new Date(year, month, monthDay.day);\n      });\n\n    return dates;\n  }, [currentMonth, monthAvailabity]);\n\n  useEffect(() => {\n    api\n      .get(`/providers/${user.id}/month-availability`, {\n        params: {\n          year: currentMonth.getFullYear(),\n          month: currentMonth.getMonth() + 1,\n        },\n      })\n      .then(({ data }) => {\n        setMonthAvailabity(data);\n      });\n  }, [currentMonth, user.id]);\n\n  useEffect(() => {\n    api\n      .get(\"appointments/me\", {\n        params: {\n          year: selectedDate.getFullYear(),\n          month: selectedDate.getMonth() + 1,\n          day: selectedDate.getDate(),\n        },\n      })\n      .then(({ data }) => {\n        setAppointments(data);\n      });\n  }, [selectedDate]);\n\n  return (\n    <Container>\n      <Header>\n        <HeaderContent>\n          <img src={logo} alt=\"Gobarber logo\" />\n\n          <Profile>\n            <img src={user.avatar} alt={user.name} />\n\n            <div>\n              <span>Bem-vindo</span>\n              <strong>{user.name}</strong>\n            </div>\n          </Profile>\n\n          <button type=\"button\" onClick={signOut}>\n            <FiPower />\n          </button>\n        </HeaderContent>\n      </Header>\n\n      <Content>\n        <Schedule>\n          <h1>Horários agendados</h1>\n          <p>\n            {isToday(selectedDate) ? <span>Hoje</span> : null}\n            <span>{selectedDateAsText}</span>\n            <span>{selectedWeekDay}</span>\n          </p>\n\n          <NextAppointment>\n            <strong>Atendimento a seguir</strong>\n            <div>\n              <img src={user.avatar} alt={user.avatar} />\n\n              <strong>{user.name}</strong>\n              <span>\n                <FiClock />\n                08:00\n              </span>\n            </div>\n          </NextAppointment>\n\n          <Section>\n            <strong>Manhã</strong>\n\n            <Appointment>\n              <span>\n                <FiClock />\n                08:00\n              </span>\n\n              <div>\n                <img src={user.avatar} alt={user.avatar} />\n                <strong>{user.name}</strong>\n              </div>\n            </Appointment>\n\n            <Appointment>\n              <span>\n                <FiClock />\n                11:00\n              </span>\n\n              <div>\n                <img src={user.avatar} alt={user.avatar} />\n                <strong>{user.name}</strong>\n              </div>\n            </Appointment>\n          </Section>\n          <Section>\n            <strong>Tarde</strong>\n\n            <Appointment>\n              <span>\n                <FiClock />\n                16:00\n              </span>\n\n              <div>\n                <img src={user.avatar} alt={user.avatar} />\n                <strong>{user.name}</strong>\n              </div>\n            </Appointment>\n          </Section>\n        </Schedule>\n        <Calendar>\n          <DayPicker\n            weekdaysShort={[\"D\", \"S\", \"T\", \"Q\", \"Q\", \"S\", \"S\"]}\n            fromMonth={new Date()}\n            disabledDays={[{ daysOfWeek: [0, 6] }, ...disableDays]}\n            modifiers={{\n              available: { daysOfWeek: [1, 2, 3, 4, 5] },\n            }}\n            selectedDays={selectedDate}\n            onDayClick={handleDateChange}\n            onMonthChange={handleMonthChange}\n            months={[\n              \"Janeiro\",\n              \"Fevereiro\",\n              \"Março\",\n              \"Abril\",\n              \"Maio\",\n              \"Junho\",\n              \"Julho\",\n              \"Agosto\",\n              \"Setembro\",\n              \"Outubro\",\n              \"Novembro\",\n              \"Dezembro\",\n            ]}\n          />\n        </Calendar>\n      </Content>\n    </Container>\n  );\n};\n\nexport default Dashboard;\n"]},"metadata":{},"sourceType":"module"}